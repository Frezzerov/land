<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles/index.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=shopping_cart"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=shopping_cart"
    />
    <title>Магазин мармелада</title>
  </head>
  <body class="page">
    <header class="header page__margin-bottom">
      <div class="header__container">
        <nav class="header__menu">
          <a class="header__link" href="#">Главная</a>
          <a class="header__link" href="#">Контакты</a>
          <a class="header__link" href="#">О нас</a>
          <a class="header__link" href="#">Отзывы</a>
        </nav>
        <div class="header__cart">
          <a href="cart.html" class="button"
            ><span class="material-symbols-outlined"> shopping_cart </span></a
          >
        </div>
      </div>
    </header>

    <section class="shop page__margin-bottom">
      <div class="shop__container">
        <h2 class="shop__header">Мармеладный мир</h2>
        <input class="shop__search" type="text" placeholder="Поиск мармелада" />
        <div class="shop__products">
          <div class="shop__product">
            <img
              class="shop_image"
              src="//avatars.mds.yandex.net/i?id=0e09fd7a39d3369bdae46f4ed70b61c3_l-5161298-images-thumbs&n=13"
              alt="Мармеладные мишки"
            />
            <h2 class="shop__title">Мармелад Haribo золотые мишки 70 г</h2>
            <section class="shop__prc">
              <a class="shop__price">120 рублей</a>
              <a class="shop__prices">90 рублей</a>
            </section>
            <p class="shop__description">
              Мармеладные мишки Haribo — сладкие, жевательные конфеты с
              фруктовым вкусом, любимые детьми и взрослыми.
            </p>
            <button class="shop__button">В корзину</button>
          </div>
          <div class="shop__product">
            <img
              class="shop_image"
              src="https://piratmarmelad.ru/catalog/product/nabor-super-kislyh-konfet-1-sht-n1-w800-h800.jpg"
              alt="Набор супер Кислых конфет"
            />
            <h2 class="shop__title">Набор супер Кислых конфет</h2>
            <section class="shop__prc">
              <a class="shop__price">700 рублей</a>
              <a class="shop__prices">500 рублей</a>
            </section>
            <p class="shop__description">
              Набор супер кислых конфет: яркие, взрывные вкусы, идеальны для
              любителей острых ощущений и сладостей!
            </p>
            <button class="shop__button">В корзину</button>
          </div>
          <div class="shop__product">
            <img
              class="shop_image"
              src="https://main-cdn.sbermegamarket.ru/mid9/hlr-system/615/826/635/812/182/100070201756b0.jpeg"
              alt="Мармелад Lava Lava Улетные бутылки Кола и апельсин 50"
            />
            <h2 class="shop__title">Мармелад Lava Lava апельсин и кола</h2>
            <section class="shop__prc">
              <a class="shop__price">79 рублей</a>
              <a class="shop__prices">69 рублей</a>
            </section>
            <p class="shop__description">
              Мармелад Lava Lava в бутылочках с колой и апельсином — яркий,
              вкусный и веселый десерт!
            </p>
            <button class="shop__button">В корзину</button>
          </div>
          <div class="shop__product">
            <img
              class="shop_image"
              src="https://ir.ozone.ru/s3/multimedia-8/6756325244.jpg"
              alt="Огромный Михаил"
            />
            <h2 class="shop__title">Мармеладный мишка</h2>
            <section class="shop__prc">
              <a class="shop__price">1399 рублей</a>
              <a class="shop__prices">999 рублей</a>
            </section>
            <p class="shop__description">
              Большой мармеладный медведь Валера — яркий, сладкий и жевательный,
              30 см в высоту!
            </p>
            <button class="shop__button">В корзину</button>
          </div>
          <div class="shop__product">
            <img
              class="shop_image"
              src="https://avatars.mds.yandex.net/get-mpic/5351166/img_id7059686974096398853.jpeg/orig"
              alt="Комплект мармелада"
            />
            <h2 class="shop__title">Набор вкуснейшего мармелада, 700г</h2>
            <section class="shop__prc">
              <a class="shop__price">1599 рублей</a>
              <a class="shop__prices">1299 рублей</a>
            </section>
            <p class="shop__description">
              Набор мармелада: яркие вкусы, натуральные ингредиенты, идеальный
              подарок для сладкоежек и гурманов.
            </p>
            <button class="shop__button">В корзину</button>
          </div>
          <div class="shop__product">
            <img
              class="shop_image"
              src="https://avatars.mds.yandex.net/get-mpic/4346078/img_id8881575264525414958.jpeg/orig"
              alt="«BabyFox»"
            />
            <h2 class="shop__title">«BabyFox»,с соком ягод и фруктов</h2>
            <section class="shop__prc">
              <a class="shop__price">99 рублей</a>
              <a class="shop__prices">89 рублей</a>
            </section>
            <p class="shop__description">
              Мармелад «BabyFox» — натуральный десерт с соком ягод и фруктов,
              который радует вкусом и цветом.
            </p>
            <button class="shop__button">В корзину</button>
          </div>
          <div class="shop__product">
            <img
              class="shop_image"
              src="https://cdn.100sp.ru/pictures/175167335"
              alt="Мармелад Docile Docile Banana"
            />
            <h2 class="shop__title">Мармелад Docile Docile Banana</h2>
            <section class="shop__prc">
              <a class="shop__price">129 рублей</a>
              <a class="shop__prices">99 рублей</a>
            </section>
            <p class="shop__description">
              Мармелад Docile Banana — нежный, сладкий десерт с натуральным
              вкусом банана и приятной текстурой.
            </p>
            <button class="shop__button">В корзину</button>
          </div>
          <div class="shop__product">
            <img
              class="shop_image"
              src="https://avatars.mds.yandex.net/get-mpic/5165418/img_id7513566664988659826.jpeg/orig"
              alt="
              Мармелад Фрумеладки Mamba"
            />
            <h2 class="shop__title">Мармелад Фрумеладки Mamba</h2>
            <section class="shop__prc">
              <a class="shop__price">119 рублей</a>
              <a class="shop__prices">109 рублей</a>
            </section>
            <p class="shop__description">
              Мармелад Mamba Фруктовый микс — яркий, насыщенный вкус фруктов в
              каждой жевательной конфете. Наслаждайтесь!
            </p>
            <button class="shop__button">В корзину</button>
          </div>
          <div class="shop__product">
            <img
              class="shop_image"
              src="https://cdn.klykva.ru/upload/klykva_1/7/item_74557/shop_items_catalog_image74557.jpg"
              alt="Жевательный Мармелад Фрутелла"
            />
            <h2 class="shop__title">Жевательный Мармелад Фрутелла</h2>
            <section class="shop__prc">
              <a class="shop__price">99 рублей</a>
              <a class="shop__prices">79 рублей</a>
            </section>
            <p class="shop__description">
              Жевательный мармелад Фрутелла — вкусные фруктовые конфеты, мягкие
              и сочные, идеально подходят для перекуса.
            </p>
            <button class="shop__button">В корзину</button>
          </div>
        </div>
      </div>
    </section>

    <div class="cart">
      <h2>Корзина</h2>
      <table>
        <thead>
          <tr>
            <th>Товар</th>
            <th>Количество</th>
            <th>Цена</th>
            <th>Итого</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <!-- Товары будут добавляться динамически -->
        </tbody>
      </table>
      <div class="total">
        <strong>Общая стоимость: <span id="total-price">0 руб.</span></strong>
      </div>
    </div>

    <section class="footer">
      <h2 class="footer__title">
        Спасибо, что выбираете наш мармелад! Сладких вам моментов!
      </h2>
    </section>

    <script>
      // Массив для хранения товаров в корзине
      let cartItems = [];

      // Функция для обновления отображения корзины
      function updateCart() {
        const cartTableBody = document.querySelector(".cart tbody");
        cartTableBody.innerHTML = "";

        let totalPrice = 0;

        cartItems.forEach((item, index) => {
          const itemTotal = item.price * item.quantity;
          totalPrice += itemTotal;

          const row = document.createElement("tr");

          row.innerHTML = `
            <td>${item.name}</td>
            <td>
              <input type="number" value="${item.quantity}" min="1" data-index="${index}" class="item-quantity" />
            </td>
            <td>${item.price} руб.</td>
            <td>${itemTotal} руб.</td>
            <td><button class="remove-item" data-index="${index}">Удалить</button></td>
          `;

          cartTableBody.appendChild(row);
        });

        document.getElementById("total-price").textContent =
          totalPrice + " руб.";
      }

      // Обработчик события добавления товара в корзину
      const addToCartButtons = document.querySelectorAll(".shop__button");

      addToCartButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const product = button.parentElement;
          const name = product.querySelector("h2").textContent;
          const price = parseFloat(
            product.querySelector(".shop__prices").textContent
          );

          const existingItem = cartItems.find((item) => item.name === name);

          if (existingItem) {
            existingItem.quantity += 1;
          } else {
            cartItems.push({ name, price, quantity: 1 });
          }

          updateCart();
        });
      });
    </script>

    <script>
      // Добавляем обработчик для изменения количества товаров
      document.body.addEventListener("change", function (event) {
        if (event.target.classList.contains("item-quantity")) {
          const index = event.target.getAttribute("data-index");
          const newQuantity = parseInt(event.target.value);

          if (newQuantity > 0) {
            cartItems[index].quantity = newQuantity;
            updateCart();
          }
        }
      });
    </script>

    <script>
      // Добавляем обработчик для удаления товаров
      document.body.addEventListener("click", function (event) {
        if (event.target.classList.contains("remove-item")) {
          const index = event.target.getAttribute("data-index");
          cartItems.splice(index, 1);
          updateCart();
        }
      });
    </script>
  </body>
</html>
